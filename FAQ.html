<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2024-10-12">

<title>Bayesian Data Analysis course - FAQ – Bayesian Data Analysis course</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Bayesian Data Analysis course</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Material</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Aalto2024.html"> 
<span class="menu-text">Aalto 2024</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./BDA3_notes.html"> 
<span class="menu-text">BDA3 notes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./assignments.html"> 
<span class="menu-text">Assignments</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./project.html"> 
<span class="menu-text">Project</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./demos.html"> 
<span class="menu-text">Demos</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./FAQ.html" aria-current="page"> 
<span class="menu-text">FAQ</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#how-to-use-r-and-rstudio-remotely" id="toc-how-to-use-r-and-rstudio-remotely" class="nav-link active" data-scroll-target="#how-to-use-r-and-rstudio-remotely">How to use R and RStudio remotely</a>
  <ul class="collapse">
  <li><a href="#jupyterhub" id="toc-jupyterhub" class="nav-link" data-scroll-target="#jupyterhub">Option 1: Using R and RStudio via JupyterHub</a></li>
  <li><a href="#option-2-use-aalto-linux-via-remote-desktop-solution-provided-by-aalto-it." id="toc-option-2-use-aalto-linux-via-remote-desktop-solution-provided-by-aalto-it." class="nav-link" data-scroll-target="#option-2-use-aalto-linux-via-remote-desktop-solution-provided-by-aalto-it.">Option 2: Use Aalto Linux via remote-desktop solution provided by Aalto-IT.</a></li>
  <li><a href="#how-to-access-the-bda-r-and-python-demos-on-cs-jupyterhub" id="toc-how-to-access-the-bda-r-and-python-demos-on-cs-jupyterhub" class="nav-link" data-scroll-target="#how-to-access-the-bda-r-and-python-demos-on-cs-jupyterhub">How to access the BDA R (and Python) demos on CS JupyterHub</a></li>
  </ul></li>
  <li><a href="#how-to-use-r-and-rstudio-on-your-own-computer" id="toc-how-to-use-r-and-rstudio-on-your-own-computer" class="nav-link" data-scroll-target="#how-to-use-r-and-rstudio-on-your-own-computer">How to use R and RStudio on your own computer</a>
  <ul class="collapse">
  <li><a href="#how-to-access-the-course-material-in-github" id="toc-how-to-access-the-course-material-in-github" class="nav-link" data-scroll-target="#how-to-access-the-course-material-in-github">How to access the course material in Github</a></li>
  <li><a href="#r-packages-used-in-demos" id="toc-r-packages-used-in-demos" class="nav-link" data-scroll-target="#r-packages-used-in-demos">R packages used in demos</a></li>
  <li><a href="#installing-aaltobda-package" id="toc-installing-aaltobda-package" class="nav-link" data-scroll-target="#installing-aaltobda-package">Installing <code>aaltobda</code> package</a></li>
  <li><a href="#error-related-to-lc_ctype-while-installing-aaltobda-r-package." id="toc-error-related-to-lc_ctype-while-installing-aaltobda-r-package." class="nav-link" data-scroll-target="#error-related-to-lc_ctype-while-installing-aaltobda-r-package.">Error related to LC_CTYPE while installing <code>aaltobda</code> r-package.</a></li>
  <li><a href="#problems-installing-r-packages-on-windows" id="toc-problems-installing-r-packages-on-windows" class="nav-link" data-scroll-target="#problems-installing-r-packages-on-windows">Problems installing R packages on Windows ?</a></li>
  <li><a href="#installing-knitr" id="toc-installing-knitr" class="nav-link" data-scroll-target="#installing-knitr">Installing <code>knitr</code></a></li>
  <li><a href="#if-knitr-is-installed-but-the-pdf-wont-compile" id="toc-if-knitr-is-installed-but-the-pdf-wont-compile" class="nav-link" data-scroll-target="#if-knitr-is-installed-but-the-pdf-wont-compile">If <code>knitr</code> is installed but the pdf won’t compile</a></li>
  <li><a href="#how-to-install-the-latest-version-of-cmdstanr-or-rstan" id="toc-how-to-install-the-latest-version-of-cmdstanr-or-rstan" class="nav-link" data-scroll-target="#how-to-install-the-latest-version-of-cmdstanr-or-rstan">How to install the latest version of <code>CmdStanR</code> or <code>RStan</code></a></li>
  <li><a href="#workarounds-for-current-rstan-windows-issues" id="toc-workarounds-for-current-rstan-windows-issues" class="nav-link" data-scroll-target="#workarounds-for-current-rstan-windows-issues">Workarounds for current Rstan Windows issues</a></li>
  </ul></li>
  <li><a href="#how-to-render-a-single-qmd-file-to-html-or-pdf" id="toc-how-to-render-a-single-qmd-file-to-html-or-pdf" class="nav-link" data-scroll-target="#how-to-render-a-single-qmd-file-to-html-or-pdf">How to render a single qmd-file to html or pdf</a></li>
  <li><a href="#what-is-tidyr-or-tidyverse-that-is-used-in-the-r-demos-what-does-mean" id="toc-what-is-tidyr-or-tidyverse-that-is-used-in-the-r-demos-what-does-mean" class="nav-link" data-scroll-target="#what-is-tidyr-or-tidyverse-that-is-used-in-the-r-demos-what-does-mean">What is <code>tidyr</code> or <code>tidyverse</code> that is used in the R demos? What does <code>%&gt;%</code> mean?</a></li>
  <li><a href="#m1-macs-with-python-and-stan" id="toc-m1-macs-with-python-and-stan" class="nav-link" data-scroll-target="#m1-macs-with-python-and-stan">M1 Macs with Python and Stan</a>
  <ul class="collapse">
  <li><a href="#build-and-install-httpstan" id="toc-build-and-install-httpstan" class="nav-link" data-scroll-target="#build-and-install-httpstan">Build and Install <code>httpstan</code></a></li>
  <li><a href="#install-pystan" id="toc-install-pystan" class="nav-link" data-scroll-target="#install-pystan">Install <code>pystan</code></a></li>
  </ul></li>
  <li><a href="#i-missed-some-deadline-or-wasnt-able-to-do-some-part-of-the-course" id="toc-i-missed-some-deadline-or-wasnt-able-to-do-some-part-of-the-course" class="nav-link" data-scroll-target="#i-missed-some-deadline-or-wasnt-able-to-do-some-part-of-the-course">I missed some deadline or wasn’t able to do some part of the course</a></li>
  <li><a href="#recommended-courses-after-bayesian-data-analysis" id="toc-recommended-courses-after-bayesian-data-analysis" class="nav-link" data-scroll-target="#recommended-courses-after-bayesian-data-analysis">Recommended courses after Bayesian Data Analysis</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Bayesian Data Analysis course - FAQ</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 12, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="how-to-use-r-and-rstudio-remotely" class="level2">
<h2 class="anchored" data-anchor-id="how-to-use-r-and-rstudio-remotely">How to use R and RStudio remotely</h2>
<section id="jupyterhub" class="level3">
<h3 class="anchored" data-anchor-id="jupyterhub">Option 1: Using R and RStudio via JupyterHub</h3>
<p>Instead of installing RStudio on your computer, you can use it in your web browser:</p>
<ul>
<li><a href="https://scicomp.aalto.fi/aalto/jupyterhub/">Information about Aalto JupyterHub</a></li>
<li>Go to <a href="https://jupyter.cs.aalto.fi">jupyter.cs.aalto.fi</a></li>
<li>Choose <code>CS-E5710 - Bayesian Data Analysis (2024)</code></li>
<li>In the Launcher click <code>RStudio</code></li>
<li>In the RStudio Files pane (bottom right) you can create folders for your work and upload files from your computer to the server
<ul>
<li>The <strong>notebooks</strong> folder is the only persistent folder (stays there if you sign out) so save everything to that folder!</li>
<li>You may get an error when uploading a large zip file, but uploading smaller zip files work. If you can’t upload demo zip file contact the course staff via Zulip.</li>
<li>You may access your data as a network drive by SMB mounting it on your own computer - <a href="https://scicomp.aalto.fi/aalto/jupyterhub-data/">see Accessing JupyterHub data</a>. This allows you to have total control over your data.</li>
</ul></li>
<li>After uploading files, use Files pane to open them (e.g.&nbsp;an RMarkdown or Quarto notebook)</li>
<li>Knitting of R, Rmd, and qmd files works as well (tested 24th August)</li>
<li>CmdStanR used later in the course has been tested to work 24th August.
<ul>
<li>To use CmdStanR:<br> <code>library(cmdstanr)</code><br>
<ul>
<li>If you do not see the following output, please contact us on Zulip: <code>This is cmdstanr version 0.6.0</code><br> <code>- CmdStanR documentation and vignettes: mc-stan.org/cmdstanr</code><br> <code>- CmdStan path: /coursedata/cmdstan</code><br> <code>- CmdStan version: 2.33.0</code><br></li>
</ul></li>
</ul></li>
<li>There is a limited memory available (3Gib) and bigger models and datasets can run out of memory with cryptic error message, but the demos and assignment models should run (if not, then contact the course staff via Zulip).</li>
<li>See also <a href="https://scicomp.aalto.fi/aalto/jupyterhub/#faq-and-bugs">Aalto JupyterHub FAQ and bugs</a></li>
</ul>
</section>
<section id="option-2-use-aalto-linux-via-remote-desktop-solution-provided-by-aalto-it." class="level3">
<h3 class="anchored" data-anchor-id="option-2-use-aalto-linux-via-remote-desktop-solution-provided-by-aalto-it.">Option 2: Use Aalto Linux via remote-desktop solution provided by Aalto-IT.</h3>
<ul>
<li><a href="https://scicomp.aalto.fi/aalto/remoteaccess/#remote-desktop">Information about Aalto remote desktop</a></li>
<li>Go to <a href="https://vdi.aalto.fi">vdi.aalto.fi</a></li>
<li>Download VMWare Horizon application or use the web portal
<ul>
<li>If using the VMWare Horizon application, click on <code>New Server</code> and enter <code>vdi.aalto.fi</code></li>
</ul></li>
<li>Enter your aalto username (aalto email works too) and password in the respective fields.</li>
<li>Select <code>Ubuntu 20.04</code></li>
<li>Click Activities, start typing <code>RStudio</code> in the search bar, and click <code>RStudio</code>.</li>
</ul>
</section>
<section id="how-to-access-the-bda-r-and-python-demos-on-cs-jupyterhub" class="level3">
<h3 class="anchored" data-anchor-id="how-to-access-the-bda-r-and-python-demos-on-cs-jupyterhub">How to access the BDA R (and Python) demos on CS JupyterHub</h3>
<ul>
<li><p>Go to <code>jupyter.cs.aalto.fi</code> on your favorite web-browser. <img src="https://zenodo.org/record/4010716/files/1.png" class="img-fluid"></p></li>
<li><p>Log-in with your aalto username and password.</p></li>
<li><p>Select the <code>CS-E5710 - Bayesian Data Analysis (2024) -r-ubuntu:6.2.3-bayesda2024</code> server. <img src="https://zenodo.org/record/8296300/files/2.png" class="img-fluid"></p></li>
<li><p>Select the <code>notebooks</code> folder in the left hand file browser. <img src="https://zenodo.org/record/8296300/files/3.png" class="img-fluid"></p></li>
<li><p>Select the <code>git clone icon</code> as seen in the screenshot below. <img src="https://zenodo.org/record/8296300/files/4.png" class="img-fluid"></p></li>
<li><p>In the text box type <code>https://github.com/avehtari/BDA_R_demos.git</code> for python demos replace <code>BDA_R_demos.git</code> with <code>BDA_Python_demos.git</code> instead. Then click <code>clone</code>. <img src="https://zenodo.org/record/8296300/files/5.png" class="img-fluid"></p></li>
<li><p>Wait a while, there should be <code>BDA_R_demos</code> folder under <code>notebooks</code> folder. Click on the <code>BDA_R_demos</code> folder. <img src="https://zenodo.org/record/8296300/files/6.png" class="img-fluid"></p></li>
<li><p>Click on the RStudio button on the right. <img src="https://zenodo.org/record/8296300/files/7.png" class="img-fluid"></p></li>
<li><p>Now you should have an R-studio like interface in your web-browser. Click on <code>File -&gt; Open File...</code> <img src="https://zenodo.org/record/4010716/files/9.png" class="img-fluid"></p></li>
<li><p>Click on <code>notebooks</code> and then select <code>BDA_R_demos</code> folder. <img src="https://zenodo.org/record/8296300/files/10.png" class="img-fluid"></p></li>
<li><p>Select a demo to run. Here we open the folder <code>demos_ch2</code> and then select <code>demo2_1.R</code> file and click <code>open</code>. This should open the file in the window. <img src="https://zenodo.org/record/4010716/files/11.png" class="img-fluid"></p></li>
<li><p>Select the contents of the file and click <code>Code -&gt; Run Selected Line(s)</code> as shown in the screenshot below. <img src="https://zenodo.org/record/4010716/files/12.png" class="img-fluid"></p></li>
<li><p>You should see the output of the code in the bottom right corner. <img src="https://zenodo.org/record/4010716/files/13.png" class="img-fluid"></p></li>
</ul>
</section>
</section>
<section id="how-to-use-r-and-rstudio-on-your-own-computer" class="level2">
<h2 class="anchored" data-anchor-id="how-to-use-r-and-rstudio-on-your-own-computer">How to use R and RStudio on your own computer</h2>
<section id="how-to-access-the-course-material-in-github" class="level3">
<h3 class="anchored" data-anchor-id="how-to-access-the-course-material-in-github">How to access the course material in Github</h3>
<p>Instead of trying to download each file separately via the Github interface, it is recommended to use one of these options:</p>
<ul>
<li>The best way is to clone the repository using git, and use pull to get the latest updates.
<ul>
<li>If you want to learn to use git, start by installing a <a href="https://www.google.com/search?q=git+clients&amp;oq=git+client">git client</a>. There are plenty of good git tutorials online. See for example the tutorial by Aalto <a href="https://scicomp.aalto.fi/scicomp/git/">Git Aalto</a></li>
</ul></li>
<li>If you don’t want to learn to use git, download a the repository as a zip file. Click the green button “Code” at the main page of the repository and choose “Download ZIP” (<a href="https://github.com/avehtari/BDA_course_Aalto/archive/master.zip">direct link</a>). Remember to download again during the course to get the latest updates.</li>
</ul>
</section>
<section id="r-packages-used-in-demos" class="level3">
<h3 class="anchored" data-anchor-id="r-packages-used-in-demos">R packages used in demos</h3>
<p>Aalto JupyterHub has all the R packages used in demos pre-installed. If you install R on your own computer, you can install all the packages used by the main demos with</p>
<pre><code>install.packages(c("MASS", "bayesplot", "brms", "cmdstanr ", "dplyr", "gganimate", "ggdist", "ggforce", "ggplot2", "grid", "gridExtra", "latex2exp", "loo", "plyr", "posterior", "purrr", "rprojroot", "tidyr", "quarto"))</code></pre>
</section>
<section id="installing-aaltobda-package" class="level3">
<h3 class="anchored" data-anchor-id="installing-aaltobda-package">Installing <code>aaltobda</code> package</h3>
<p>The course has its own R package <code>aaltobda</code> with data and functionality to simplify coding. <code>aaltobda</code> has been pre-installed in Aalto JupyterHub. To install the package to your own computer just run the following:</p>
<ol type="1">
<li><code>install.packages("aaltobda", repos = c("https://avehtari.r-universe.dev", getOption("repos")))</code></li>
</ol>
<p>If during the course there is announcement that <code>aaltobda</code> has been updated (e.g.&nbsp;some error has been fixed), you can get the latest version by repeating the second step above.</p>
</section>
<section id="error-related-to-lc_ctype-while-installing-aaltobda-r-package." class="level3">
<h3 class="anchored" data-anchor-id="error-related-to-lc_ctype-while-installing-aaltobda-r-package.">Error related to LC_CTYPE while installing <code>aaltobda</code> r-package.</h3>
<p>When installing the <code>aaltobda</code> package, you may encounter an error like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>Error<span class="sc">:</span> (converted from warning) Setting LC_CTYPE failed, using <span class="st">"C"</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>Execution halted</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>Error<span class="sc">:</span> Failed to install <span class="st">'aaltobda'</span> from GitHub<span class="sc">:</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a> (converted from warning) installation of package <span class="st">'/var/folders/g6/bdv4dr4s6qq4zyxw2nzy26kr0000gn/T//Rtmp3uYwuD/file121f355845a3/aaltobda_0.1.tar.gz'</span> had non<span class="sc">-</span>zero exit status</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Solution:</strong> See the following StackOverflow solution. (<a href="https://stackoverflow.com/a/3909546">link</a>)</p>
</section>
<section id="problems-installing-r-packages-on-windows" class="level3">
<h3 class="anchored" data-anchor-id="problems-installing-r-packages-on-windows">Problems installing R packages on Windows ?</h3>
<p>Getting the setup needed for the course working on Windows might involve a bit more effort than on Linux and Mac. Consequently, <strong>we recommend using either Linux or MacOS, or using R remotely</strong>. Moreover, <code>Stan</code>, the probabilistic programming language which we will use later on during the course requires a C++ compiler toolchain which is not available by default in Windows (blame Microsoft). However, if you want to use Windows and have a problem getting the setup working, below are two options to consider:</p>
</section>
<section id="installing-knitr" class="level3">
<h3 class="anchored" data-anchor-id="installing-knitr">Installing <code>knitr</code></h3>
<p>If you just installed RStudio and R, chances are you don’t have <code>knitr</code> installed, the package responsible for rendering your notebook to pdf.</p>
<p><strong>Solution:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"knitr"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can also install packages from RStudio menu <code>Tools-&gt;Install Packages</code>.</p>
</section>
<section id="if-knitr-is-installed-but-the-pdf-wont-compile" class="level3">
<h3 class="anchored" data-anchor-id="if-knitr-is-installed-but-the-pdf-wont-compile">If <code>knitr</code> is installed but the pdf won’t compile</h3>
<p>In this case it is possible that you don’t have LaTeX installed, which is the package that runs the engine to process the text and render the pdf itself.</p>
<p><strong>Solution:</strong> Tinytex is the bare minimum Latex core that you need to install in order to run the pdf compiler. If you want to go further and download a full distribution of Latex, look at TeX Live for Linux and MacTeX for Mac OS.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tinytex"</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>tinytex<span class="sc">::</span><span class="fu">install_tinytex</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="how-to-install-the-latest-version-of-cmdstanr-or-rstan" class="level3">
<h3 class="anchored" data-anchor-id="how-to-install-the-latest-version-of-cmdstanr-or-rstan">How to install the latest version of <code>CmdStanR</code> or <code>RStan</code></h3>
<ul>
<li>Make sure you have installed R version 4.* or newer. If you don’t, install a newer version using instructions from <a href="https://www.r-project.org/">https://www.r-project.org/</a></li>
<li>At the moment <code>CmdStanR</code> is faster in use, and thus we recommend using <code>CmdStanR</code> instead of <code>RStan</code>, but both can be used for the assignments.</li>
<li><a href="https://mc-stan.org/cmdstanr/"><code>CmdStanR</code></a> is a lightweight interface to Stan for R users (see <code>CmdStanPy</code> for Python).</li>
<li><code>CmdStanR</code> avoids some installation problems as it doesn’t require matching C++ tools for <code>R</code> and <code>RStan</code></li>
<li>Install <code>RStan</code> along with the necessary C++ compiler toolchain as described <a href="https://github.com/stan-dev/rstan/wiki/RStan-Getting-Started">here</a></li>
</ul>
<p>Instead of RStan, you can also use new <code>CmdStanR</code> which maybe easier to install.</p>
</section>
<section id="workarounds-for-current-rstan-windows-issues" class="level3">
<h3 class="anchored" data-anchor-id="workarounds-for-current-rstan-windows-issues">Workarounds for current Rstan Windows issues</h3>
<ul>
<li><a href="https://discourse.mc-stan.org/t/workarounds-for-current-rstan-windows-issues/17389">A list of the current RStan Windows problems and and known temporary workarounds</a></li>
</ul>
</section>
</section>
<section id="how-to-render-a-single-qmd-file-to-html-or-pdf" class="level2">
<h2 class="anchored" data-anchor-id="how-to-render-a-single-qmd-file-to-html-or-pdf">How to render a single qmd-file to html or pdf</h2>
<p>Clicking Render in RStudio defaults to render all qmd files in the directory (“project”) and to render both html and pdf. To save time in rendering, you can install <code>quarto</code> R package</p>
<pre><code>install.packages("quarto")
library(quarto)</code></pre>
<p>and then render just one file and choose the target to be html with</p>
<pre><code>quarto_render("template2.qmd", output_format = "html")</code></pre>
<p>and when you are ready to submit the pdf, use</p>
<pre><code>quarto_render("template2.qmd", output_format = "pdf")</code></pre>
<p><code>quarto</code> R package is available as pre-installed in JupyterHub (you may need to restart your server o get the new image).</p>
<p>If the rendering to pdf doesn’t work, you can print the html to pdf file, but do make sure to turn off “More setings -&gt; Print headers and footers” to avoid accidentally printing your identity.</p>
</section>
<section id="what-is-tidyr-or-tidyverse-that-is-used-in-the-r-demos-what-does-mean" class="level2">
<h2 class="anchored" data-anchor-id="what-is-tidyr-or-tidyverse-that-is-used-in-the-r-demos-what-does-mean">What is <code>tidyr</code> or <code>tidyverse</code> that is used in the R demos? What does <code>%&gt;%</code> mean?</h2>
<ul>
<li><a href="https://www.tidyverse.org/">Tidyverse</a> is a collection of R packages designed for data science. The packages “share an underlying design philosophy, grammar, and data structures”.</li>
<li>A clear characteristic that distinguishes tidyverse from the base R is the <a href="https://style.tidyverse.org/pipes.html">pipe operator</a> <code>%&gt;%</code></li>
<li>Recent R versions have a new built-in pipe operator <code>|&gt;</code>, which in most cases can replace <code>%&gt;%</code>, and there are some differences only in more advanced use cases.</li>
<li>In this course you do not need to use tidyverse. However, some packages belonging to tidyverse, such as <code>ggplot2</code>, can be useful for visualizing results in the reports.</li>
</ul>
</section>
<section id="m1-macs-with-python-and-stan" class="level2">
<h2 class="anchored" data-anchor-id="m1-macs-with-python-and-stan">M1 Macs with Python and Stan</h2>
<p>Unfortunately the installation of <code>pystan</code> will fail on an M1 Mac, as there is not a binary wheel available for the <code>httpstan</code> dependency. A recommended alternative here is the <a href="https://mc-stan.org/cmdstanpy/">CmdStanPy package</a>.</p>
<p>M1 Mac users that are intent on using <code>pystan</code> will need to complete the following steps to build <code>httpstan</code> from source and then install <code>pystan</code>:</p>
<section id="build-and-install-httpstan" class="level3">
<h3 class="anchored" data-anchor-id="build-and-install-httpstan">Build and Install <code>httpstan</code></h3>
<pre><code># Download httpstan source
git clone https://github.com/stan-dev/httpstan
cd httpstan
# Build shared libraries and generate code
python3 -m pip install poetry
# Build httpstan source
#   - There will be many compiler warnings, these are safe to ignore
make -j8
# Build the httpstan wheel
python3 -m poetry build
# Install the wheel
python3 -m pip install dist/*.whl</code></pre>
</section>
<section id="install-pystan" class="level3">
<h3 class="anchored" data-anchor-id="install-pystan">Install <code>pystan</code></h3>
<pre><code>python3 -m pip install pystan</code></pre>
</section>
</section>
<section id="i-missed-some-deadline-or-wasnt-able-to-do-some-part-of-the-course" class="level2">
<h2 class="anchored" data-anchor-id="i-missed-some-deadline-or-wasnt-able-to-do-some-part-of-the-course">I missed some deadline or wasn’t able to do some part of the course</h2>
<ul>
<li>I missed the deadline to register for the course in Sisu. Can I join the course?
<ul>
<li>Yes, just register in MyCourses.</li>
</ul></li>
<li>I missed the deadline for the assignment. Can you accept my late submission?
<ul>
<li>Open MyCourses Quizzes are automatically submitted at the deadline time</li>
<li>If you miss the FeedbackFruits deadline first time it’s used due technical problems, but you send the pdf to one of the TAs few minutes after the deadline it can accepted once. As the recommended submission time is before 4pm on Friday, you have in general 56 hours extra hours for submission and several few minute late submissions is not likely just due to the technical problems.</li>
</ul></li>
<li>I was not able to do one of the assignments because [some personal problem]. Can I do some extra work?
<ul>
<li>Things happen and you don’t need to tell the course staff your personal reasons (especially you shouldn’t tell any health issue details). Everyone gets a second change in period III. In period III there is just one submission deadline, but otherwise the procedure is the same (ie. you need to return all the assignments). If you submitted the project work in autumn you don’t need to re-submit it if you re-submit assignments.</li>
</ul></li>
<li>I missed the deadline to register project group. Can I still register?
<ul>
<li>Yes. Those who registered early are allowed to choose the presentation slots first.</li>
</ul></li>
<li>My group member a) disappeared, b) doesn’t do anything, c) is annoying. Can I continue with the project alone.
<ul>
<li>First we hope you can resolve the issue, but if nothing works, then you can continue the project work alone.</li>
</ul></li>
<li>I was not able a) to do the project or b) to give a presentation because [some personal problem]. Can a) I submit it later, b) present later.
<ul>
<li>Things happen and you don’t need to tell the course staff your personal reasons (especially you shouldn’t tell any health issue details). Everyone gets a second change in period III. In period III there is second project submission deadline and presentation slots. If you are happy with your assignment score, you don’t need to re-submit assignments if you submit the project work in period III.</li>
</ul></li>
</ul>
</section>
<section id="recommended-courses-after-bayesian-data-analysis" class="level2">
<h2 class="anchored" data-anchor-id="recommended-courses-after-bayesian-data-analysis">Recommended courses after Bayesian Data Analysis</h2>
<p>Here are some great Aalto courses that are using Bayesian inference</p>
<ul>
<li><a href="https://mycourses.aalto.fi/course/info.php?id=40717">CS-E4820 - Machine Learning: Advanced Probabilistic Methods</a> (common probabilistic models in machine learning, such as sparse Bayesian linear models, Gaussian mixture models and factor analysis models, variational inference)</li>
<li><a href="https://mycourses.aalto.fi/course/info.php?id=39443">ELEC-E8106 - Bayesian Filtering and Smoothing</a> (dynamical systems, time series, tracking)</li>
<li><a href="https://mycourses.aalto.fi/course/view.php?id=44810">CS-E4895 - Gaussian Processes</a></li>
<li><a href="https://mycourses.aalto.fi/course/info.php?id=40704">CS-E5795 - Computational Methods in Stochastics</a> (more about MC, MCMC, HMC)</li>
<li><a href="https://mycourses.aalto.fi/course/info.php?id=40592">MS-E1654 - Computational Inverse Problems</a></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/avehtari\.github\.io\/BDA_course_Aalto\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>